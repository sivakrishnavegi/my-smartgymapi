ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /Users/sivakrishnavegi/Desktop/code/my-gymapi/tsconfig.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
FAIL src/modules/academics/__tests__/schoolConfig.test.ts (5.186 s)
  Tenant School Configuration
    ✓ should configure school successfully (2 ms)
    ✕ should return 404 if school not found (1 ms)
    ✓ should return 400 if x-api-key header is missing
    ✓ should return 400 if domain mismatch (1 ms)
    ✕ should handle errors gracefully (5001 ms)

  ● Tenant School Configuration › should return 404 if school not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"message": "School not found or does not belong to this tenant", "success": false}
    Received: {"message": "Invalid Tenant ID: Tenant not found", "success": false}

    Number of calls: 1

      119 |
      120 |         expect(res.status).toHaveBeenCalledWith(404);
    > 121 |         expect(res.json).toHaveBeenCalledWith(expect.objectContaining({
          |                          ^
      122 |             success: false,
      123 |             message: "School not found or does not belong to this tenant"
      124 |         }));

      at src/modules/academics/__tests__/schoolConfig.test.ts:121:26
      at fulfilled (src/modules/academics/__tests__/schoolConfig.test.ts:5:58)

  ● Tenant School Configuration › should handle errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      152 |     });
      153 |
    > 154 |     it("should handle errors gracefully", async () => {
          |     ^
      155 |         const error = new Error("Database error");
      156 |         mockQuery.exec.mockRejectedValueOnce(error);
      157 |

      at src/modules/academics/__tests__/schoolConfig.test.ts:154:5
      at Object.<anonymous> (src/modules/academics/__tests__/schoolConfig.test.ts:45:1)

  ● Tenant School Configuration › should handle errors gracefully

    Database error

      153 |
      154 |     it("should handle errors gracefully", async () => {
    > 155 |         const error = new Error("Database error");
          |                       ^
      156 |         mockQuery.exec.mockRejectedValueOnce(error);
      157 |
      158 |         await configureSchool(req, res);

      at src/modules/academics/__tests__/schoolConfig.test.ts:155:23
      at src/modules/academics/__tests__/schoolConfig.test.ts:8:71
      at __awaiter (src/modules/academics/__tests__/schoolConfig.test.ts:4:12)
      at Object.<anonymous> (src/modules/academics/__tests__/schoolConfig.test.ts:154:54)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 3 passed, 5 total
Snapshots:   0 total
Time:        5.252 s, estimated 6 s
Ran all test suites matching src/modules/academics/__tests__/schoolConfig.test.ts.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
